#
# This is the Apache configuration for the Disk Pool Manager (DPM) HTTP/DAV module.
#

# To use the DPM DAV module you need to enable the SSL directives below.
# You can do it either by uncommenting the lines below (and updating the values if requires),
# or by doing it in the ssl.conf file directly.
<IfModule ssl_module>
  # Path to the CA certificates (change as appropriate if your CA certificates are elsewhere)
  # SSLCACertificatePath /etc/grid-security/certificates

  # This improves HTTPS performance when the client disables encryption
  # SSLCipherSuite NULL-MD5:NULL:RC4-MD5:RC4:+LOW:+MEDIUM:+HIGH:+EXP
  # SSLHonorCipherOrder on

  # Client verification should be at least optional (see ssl.conf for more information)
  # SSLVerifyClient require
  # SSLVerifyDepth  10
</IfModule>


# it is critical that mod_dav is not loaded before lcgdm_ns_module
<IfModule !dav_module>
  LoadModule dav_module       /usr/lib64/httpd/modules/mod_lcgdm_dav.so
</IfModule>
LoadModule lcgdm_ns_module   /usr/lib64/httpd/modules/mod_lcgdm_ns.so

# DMLite configuration file
NSDMLite /etc/ugr/ugrdmlite.conf

# Head, disk, or lfc. For the ugr, this has to be 'lfc'
NSType DPM

# DPM/LFC DAV location
<Location /myfed>

  # Enable DPM DAV here
  DAV nameserver 

  # Add here any configuration related to access and security (mod_auth, SSL, etc)
  ##

  # None, one or several flags
  # Write           Enable write access
  NSFlags Write


  # On redirect, maximum number of replicas in the URL
  NSMaxReplicas 3

  # User for anonymous access to the federation (not to the data or to the storage endpoints!)
  NSAnon nobody

</Location>

# Static content
Alias /static/ /usr/share/lcgdm-dav/

# Compress text output (i.e. directory listings)
# This can reduce really _a_lot_ the response time for big directories.
AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css


